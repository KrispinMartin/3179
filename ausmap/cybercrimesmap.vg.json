{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 800,
    "height": 600,
    "config": {
      "view": {
        "stroke": "transparent"
      }
    },
    "projection": { "type": "mercator" },
    "params": [
      {
        "name": "cybercrime_select",
        "bind": {
          "input": "select",
            "options": [
                null,
                "Personal Fraud",
                "Online Impersonation",
                "Card Fraud",
                "Identity Theft",
                "Scams"
            ],
            "labels":[
                "Show All",
                "Personal Fraud",
                "Online Impersonation",
                "Card Fraud",
                "Identity Theft",
                "Scams"
            ],
            "name": "Select Cybercrime: "
        }
      }
    ],
    "data": {
      "url": "https://raw.githubusercontent.com/KrispinMartin/3179/refs/heads/main/data/cybercrimes.csv"
    },
    "transform": [
      {
        "lookup": "State",
        "from": {
          "data": {
            "url": "https://raw.githubusercontent.com/KrispinMartin/3179/refs/heads/main/ausmap/ne_50m_admin_1_states_provinces.topojson",
            "format": {
              "type": "topojson",
              "feature": "ne_50m_admin_1_states_provinces"
            }
          },
          "key": "properties.name"
        },
        "as": "geo"
      },
      { "filter": "cybercrime_select == null || datum.State == cybercrime_select" }
    ],
    "layer": [
      {
        "mark": { "type": "geoshape", "stroke": "black", "strokeWidth": 1 },
        "encoding": {
          "shape": {
            "field": "geo",
            "type": "geojson"
          },
          "color": {
            "field": "cybercrime_select",
            "type": "quantitative",
            "scale": {
              "type": "sequential",
              "range": [
                "#edf8fb",
                "#bfd3e6",
                "#9ebcda",
                "#8c96c6",
                "#8856a7",
                "#810f7c",
                "a50f15"
              ]            
            }
          },
          "opacity": { "value": 0.85},
          "tooltip": [
            { "field": "State", "type": "nominal", "title": "State" },
            {
              "field": "cybercrime_select",
              "type": "nominal",
              "title": "Cyber-crime"
            }
          ]
        }
      },
      {
        "mark": {
          "type": "text",
          "fontSize": 10.5,
          "color": "black",
          "fontWeight": "bold",
          "align": "center",
          "dy": -10,
          "dx": -3
        },
        "encoding": {
          "text": { "field": "geo.properties.name", "type": "nominal" },
          "longitude": {
            "field": "geo.properties.longitude",
            "type": "quantitative"
          },
          "latitude": {
            "field": "geo.properties.latitude",
            "type": "quantitative"
          }
        }
      }
    ]
  }
  