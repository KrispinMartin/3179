{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "Criminality Score of Countries",
  "width": 1000,
  "height": 600,
  "data":{"url": "https://raw.githubusercontent.com/KrispinMartin/3179/refs/heads/main/data/choroplethmap.csv"},
  "projection": {"type": "equalEarth", "rotate": [0, 0, 0]},
  "layer":[
      {
          "data": {
          "url": "https://raw.githubusercontent.com/KrispinMartin/3179/refs/heads/main/worldmap/ne_110m.json",
          "format": {"type": "topojson", "feature": "ne_110m_ocean.Ocean"}
          },
          "mark": {"type": "geoshape", "fill": "skyblue"}
      },
      {
          "data": {
          "url": "https://raw.githubusercontent.com/KrispinMartin/3179/refs/heads/main/worldmap/ne_110m.json",
          "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
          },
          "mark": {"type": "geoshape", "fill": null,  "stroke": "lightslategrey"}

      },
      {
          "data": {
          "url": "https://raw.githubusercontent.com/KrispinMartin/3179/refs/heads/main/worldmap/ne_110m.json",
          "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
          },
          "mark": {"type": "geoshape", "fill": "white", "stroke": "darkslategrey", "strokeWidth": 1}
      },
      

      {
          "data": {
          "url": "https://raw.githubusercontent.com/KrispinMartin/3179/refs/heads/main/worldmap/ne_110m.json",
          "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
          },
          "transform": [
          {
              "lookup": "properties.NAME",
              "from": {
              "data": {
                  "url": "https://raw.githubusercontent.com/KrispinMartin/3179/refs/heads/main/data/choroplethmap.csv"
              },
              "key": "Country"
          },
              "as": "geo"
              }
          ],
          "mark": {"type": "geoshape"},
          "encoding": {
          "color": {
              "field": "geo.['Criminality 2023']",
              "type": "quantitative",
              "scale": {"type": "sequential",
                      "domain": [2,4,6,8,10], 
                      "range": ["#fee5d9", "#fcae91","#fb6a4a", "#de2d26", "#a50f15"]
                  },
              "legend": {"title": "Criminality Score"}
          },
          "tooltip": [
              {"field": "properties.NAME_LONG", "type": "nominal", "title": "Country"},
              {"field": "geo.['Criminality 2023']", "type": "quantitative", "format": ".2f", "title": "Criminality Score 2023"},
              {"field": "properties.CONTINENT", "type": "nominal", "title": "Continent"},
              {"field": "properties.SUBREGION", "type": "nominal", "title": "Region"}
          ]
          }
      }
  ]
}